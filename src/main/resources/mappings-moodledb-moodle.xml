<?xml version="1.0" encoding="UTF-8" ?>
<entity-mappings xmlns="http://xmlns.jcp.org/xml/ns/persistence/orm"
				 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
				 xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence/orm
									 http://xmlns.jcp.org/xml/ns/persistence/orm_2_1.xsd"
				 version="2.1">
	<description>Entity mappings for the activity data components of the moodle database</description>
	<package>ca.uoguelph.socs.icc.edm.domain.element.activity.moodle</package>

	<access>PROPERTY</access>

	<!--*********************************************************************-->
	<!-- MoodleDataMapping:  Subclasses of GenericGroupedActivity            -->
	<!--*********************************************************************-->

	<entity name="Book" class="Book" metadata-complete="true">
		<table name="mdl_book"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<one-to-many name="subActivities" target-entity="BookChapter" mapped-by="parent"/>
			<transient name="grades"/>
			<transient name="log"/>
		</attributes>
	</entity>

	<entity name="Forum" class="Forum" metadata-complete="true">
		<table name="mdl_forum"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<one-to-many name="subActivities" target-entity="ForumDiscussion" mapped-by="parent"/>
			<transient name="grades"/>
			<transient name="log"/>
		</attributes>
	</entity>

	<entity name="Lesson" class="Lesson" metadata-complete="true">
		<table name="mdl_lesson"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<one-to-many name="subActivities" target-entity="LessonPage" mapped-by="parent"/>
			<transient name="grades"/>
			<transient name="log"/>
		</attributes>
	</entity>

	<entity name="Workshop" class="Workshop" metadata-complete="true">
		<table name="mdl_workshop"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<one-to-many name="subActivities" target-entity="WorkshopSubmission" mapped-by="parent"/>
			<transient name="grades"/>
			<transient name="log"/>
		</attributes>
	</entity>

	<!--*********************************************************************-->
	<!-- Moodle data mapping:  Subclasses of GenericGroupedActivityGroup     -->
	<!--*********************************************************************-->

	<entity name="ForumDiscussion" class="ForumDiscussion" metadata-complete="true">
		<table name="mdl_forum_discussions"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="parent" target-entity="Forum" optional="false">
				<join-column name="forum"/>
			</many-to-one>
			<one-to-many name="subActivities" target-entity="ForumPost" mapped-by="parent"/>
			<transient name="log"/>
		</attributes>
	</entity>

	<!--*********************************************************************-->
	<!-- Moodle data mapping:  Subclasses of GenericSubActivity              -->
	<!--*********************************************************************-->

	<entity name="BookChapter" class="BookChapter" metadata-complete="true">
		<table name="mdl_book_chapters"/>
		<attribute-override name="name">
			<column name="title"/>
		</attribute-override>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="parent" target-entity="Book" optional="false">
				<join-column name="bookid" referenced-column-name="id" nullable="false" updatable="false"/>
			</many-to-one>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="ForumPost" class="ForumPost" metadata-complete="true">
		<table name="mdl_forum_posts"/>
		<attribute-override name="name">
			<column name="subject"/>
		</attribute-override>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="parent" target-entity="ForumDiscussion" optional="false">
				<join-column name="discussion"/>
			</many-to-one>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="LessonPage" class="LessonPage" metadata-complete="true">
		<table name="mdl_lesson_pages"/>
		<attribute-override name="name">
			<column name="title"/>
		</attribute-override>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="parent" target-entity="Lesson" optional="false">
				<join-column name="lessonid"/>
			</many-to-one>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="WorkshopSubmission" class="WorkshopSubmission" metadata-complete="true">
		<table name="mdl_workshop_submissions"/>
		<attribute-override name="name">
			<column name="title"/>
		</attribute-override>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="parent" target-entity="Workshop" optional="false">
				<join-column name="workshopid"/>
			</many-to-one>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<!--*********************************************************************-->
	<!-- Moodle data mapping:  Subclasses of GenericNamedActivity            -->
	<!--*********************************************************************-->

	<entity name="Assign" class="Assign" metadata-complete="true">
		<table name="mdl_assign"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="Checklist" class="Checklist" metadata-complete="true">
		<table name="mdl_checklist"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="Choice" class="Choice" metadata-complete="true">
		<table name="mdl_choice"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="Feedback" class="Feedback" metadata-complete="true">
		<table name="mdl_feedback"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="Folder" class="Folder" metadata-complete="true">
		<table name="mdl_folder"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="Label" class="Label" metadata-complete="true">
		<table name="mdl_label"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="Page" class="Page" metadata-complete="true">
		<table name="mdl_page"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="Quiz" class="Quiz" metadata-complete="true">
		<table name="mdl_quiz"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="Resource" class="Resource" metadata-complete="true">
		<table name="mdl_resource"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="Scheduler" class="Scheduler" metadata-complete="true">
		<table name="mdl_scheduler"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>

	<entity name="URL" class="URL" metadata-complete="true">
		<table name="mdl_url"/>
		<attributes>
			<id name="id">
				<column name="id" nullable="false" unique="true"/>
			</id>
			<many-to-one name="course" target-entity="ca.uoguelph.socs.icc.edm.domain.element.CourseData" optional="false">
				<join-column name="course" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<many-to-one name="type" target-entity="ca.uoguelph.socs.icc.edm.domain.element.MoodleActivityType" optional="false">
				<join-column name="module" nullable="false" insertable="false" updatable="false"/>
			</many-to-one>
			<transient name="grades"/>
			<transient name="log"/>
			<transient name="subActivities"/>
		</attributes>
	</entity>
</entity-mappings>
